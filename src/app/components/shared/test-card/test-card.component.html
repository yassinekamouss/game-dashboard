<div *ngIf="test" class="test-card">
  <div class="test-header">
    <div class="test-icon">
      <i class="fas fa-file-alt"></i>
    </div>
    
    <div class="test-meta">
      <div class="test-grade-badge">
        <i class="fas fa-graduation-cap"></i>
        <span>{{ test?.grade }}</span>
      </div>
      <div class="test-duration">
        <i class="fas fa-clock"></i>
        <span>{{ test?.duration }} min</span>
      </div>
    </div>

    <div class="test-state-badge" [ngClass]="test?.state">
      <i
        *ngIf="test?.state === 'created'"
        class="fas fa-lightbulb"
        aria-label="Créé"
      ></i>
      <i
        *ngIf="test?.state === 'published'"
        class="fas fa-bullhorn"
        aria-label="Publié"
      ></i>
      <i
        *ngIf="test?.state === 'completed'"
        class="fas fa-check-circle"
        aria-label="Terminé"
      ></i>
      <span>
        {{
          test?.state === 'created'
            ? 'Créé'
            : test?.state === 'published'
            ? 'Publié'
            : 'Terminé'
        }}
      </span>
    </div>
  </div>

  <div class="test-card-content">
    <h3 class="test-title">{{ test?.title }}</h3>

    <div class="test-info">
      <div class="test-date">
        <i class="fas fa-calendar-alt"></i>
        <span>{{ test?.createdAt | date: 'shortDate' }}</span>
      </div>
      <div class="test-author">
        <i class="fas fa-user"></i>
        <span>{{ currentUser?.firstName }} {{ currentUser?.lastName }}</span>
      </div>
    </div>

    <ng-container *ngIf="test?.groups | keyvalue as groupEntries">
      <div class="test-groups">
        <i class="fas fa-users"></i>
        <span>{{ groupEntries.length }} groupes</span>
      </div>
    </ng-container>
  </div>
</div>
